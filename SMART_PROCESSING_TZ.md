# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: Smart Processing –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–º–µ—Ç–æ–∫ - –∏—Ç–µ—Ä–∞—Ü–∏—è 1

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 17.02.2026  
**–°—Ç–∞—Ç—É—Å:** –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ  
**Issue:** [#5](https://github.com/mkoval-pwork/obsidian-telegram-bot/issues/5)

**üìò –î–ª—è AI-–∞–≥–µ–Ω—Ç–∞:** [SMART_PROCESSING_IMPLEMENTATION.md](./SMART_PROCESSING_IMPLEMENTATION.md) - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –∫–æ–¥–æ–º

---

## 1. –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

### 1.1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

Smart Processing - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–º–µ—Ç–æ–∫ (—Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∏ –≥–æ–ª–æ—Å–æ–≤—ã—Ö) —á–µ—Ä–µ–∑ LLM –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ Obsidian. –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏–ª–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–µ—Ä–µ–¥ —Ñ–∏–Ω–∞–ª—å–Ω—ã–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º.

### 1.2. –¶–µ–ª—å

–ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–π –±–æ—Ç –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–º–µ—Ç–æ–∫ –≤ —É–º–Ω–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ—Ç –≤—Ö–æ–¥—è—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç actionable tasks –∏–∑ —Ç–µ–∫—Å—Ç–∞
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ç–µ–≥–∏ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∞—Ç–∫–∏–µ —Ä–µ–∑—é–º–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

### 1.3. –ö–æ–Ω—Ç–µ–∫—Å—Ç

–≠—Ç–æ –ø–µ—Ä–≤–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è –∏–∑ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ –ø–æ –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏—é –±–æ—Ç–∞ –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –¥–ª—è Personal Knowledge Management. –í –±—É–¥—É—â–∏—Ö –∏—Ç–µ—Ä–∞—Ü–∏—è—Ö –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—é, —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫ –∏ —Ä–∞–±–æ—Ç—É —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏–∑ Obsidian Vault.

---

## 2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 2.1. LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|----------|----------|-------------|
| **–ü—Ä–æ–≤–∞–π–¥–µ—Ä** | OpenAI API | –£–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è Whisper, –µ–¥–∏–Ω—ã–π API key |
| **–ú–æ–¥–µ–ª—å** | GPT-4o-mini | –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç—å/–∫–∞—á–µ—Å—Ç–≤–æ/—Å—Ç–æ–∏–º–æ—Å—Ç—å |
| **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** | –ß–µ—Ä–µ–∑ `.env` —Ñ–∞–π–ª | –ì–∏–±–∫–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ |
| **Temperature** | 0.3 | –ë–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã |
| **Max tokens** | 500 | –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è summary + tags + tasks |

**–ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

```env
# Smart Processing Configuration
SMART_PROCESSING_ENABLED=true
SMART_PROCESSING_MODEL=gpt-4o-mini
SMART_PROCESSING_TEMPERATURE=0.3
SMART_PROCESSING_MAX_TOKENS=500
```

### 2.2. –û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

| –¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è | –û–±—Ä–∞–±–æ—Ç–∫–∞ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|---------------|-----------|------------|
| –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è | ‚úÖ –î–∞ | –ù–∞–ø—Ä—è–º—É—é |
| –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è | ‚úÖ –î–∞ | –ü–æ—Å–ª–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Whisper |
| –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ | –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π | –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è |

### 2.3. –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Telegram Inline Buttons.

#### Workflow –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

1. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –∏–ª–∏ –≥–æ–ª–æ—Å
   - –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å: "‚è≥ –°–æ—Ö—Ä–∞–Ω—è—é –∑–∞–º–µ—Ç–∫—É..."

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ AI**
   - –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞: "ü§ñ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é —á–µ—Ä–µ–∑ AI..."
   - LLM –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (3-5 —Å–µ–∫—É–Ω–¥)

3. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**
   - –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ –≤–∏–¥–µ –ø—Ä–µ–≤—å—é
   - –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ inline –∫–Ω–æ–ø–∫–∏:
     - ‚úÖ **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å** - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
     - ‚úèÔ∏è **–¢–µ–≥–∏** - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–≥–∏
     - ‚úèÔ∏è **–†–µ–∑—é–º–µ** - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—é–º–µ
     - ‚úèÔ∏è **–ó–∞–¥–∞—á–∏** - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏
     - üîÑ **–ó–∞–Ω–æ–≤–æ** - –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ LLM
     - ‚ùå **–ö–∞–∫ –µ—Å—Ç—å** - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏

4. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**
   - –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
   - –ë–æ—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–µ–≤—å—é –∏ —Å–Ω–æ–≤–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫–∏

5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**
   - –ü—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –∑–∞–º–µ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ GitHub
   - –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "‚úÖ Saved to 2026-02-17.md"

---

## 3. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 3.1. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

LLM –¥–æ–ª–∂–µ–Ω –∏–∑–≤–ª–µ–∫–∞—Ç—å/–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∏ —Ç–∏–ø–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏:

#### 3.1.1. –¢–µ–≥–∏ (Tags)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: 3-5 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ç–µ–≥–æ–≤
- –Ø–∑—ã–∫: –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
- –§–æ—Ä–º–∞—Ç: lowercase, —á–µ—Ä–µ–∑ –¥–µ—Ñ–∏—Å (kebab-case)
- –ë–∞–∑–æ–≤—ã–µ —Ç–µ–≥–∏: `inbox`, `telegram` –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å: –æ—Ç –æ–±—â–∏—Ö –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º

**–ü—Ä–∏–º–µ—Ä—ã:**
```
–¢–µ–∫—Å—Ç: "–ù—É–∂–Ω–æ –∫—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ –∏ —Ö–ª–µ–± –∑–∞–≤—Ç—Ä–∞"
–¢–µ–≥–∏: [inbox, telegram, shopping, groceries, todo]

–¢–µ–∫—Å—Ç: "–ò–¥–µ—è –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞: —Å–æ–∑–¥–∞—Ç—å API –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞"
–¢–µ–≥–∏: [inbox, telegram, project-idea, api, nlp]

–¢–µ–∫—Å—Ç: "–í—Å—Ç—Ä–µ—á–∞ —Å –∫–ª–∏–µ–Ω—Ç–æ–º 15:00, –æ–±—Å—É–¥–∏—Ç—å MVP"
–¢–µ–≥–∏: [inbox, telegram, meeting, client, mvp]
```

#### 3.1.2. –†–µ–∑—é–º–µ (Summary)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –î–ª–∏–Ω–∞: 1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –º–∞–∫—Å–∏–º—É–º 200 —Å–∏–º–≤–æ–ª–æ–≤
- –Ø–∑—ã–∫: —Ç–æ—Ç –∂–µ, —á—Ç–æ –∏ –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç
- –°—Ç–∏–ª—å: –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ, –±–µ–∑ –æ—Ü–µ–Ω–æ–∫
- –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: –∫–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏ –∏ —Å—É—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—Ä—ã:**
```
–¢–µ–∫—Å—Ç: "–°–µ–≥–æ–¥–Ω—è –Ω–∞ –≤—Å—Ç—Ä–µ—á–µ –æ–±—Å—É–¥–∏–ª–∏ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç. –†–µ—à–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 
        –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, —Å—Ç–∞—Ä—Ç—É–µ–º —Å–æ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–∏..."
Summary: "–û–±—Å—É–∂–¥–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —Å —Ä–µ—à–µ–Ω–∏–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, 
          —Å—Ç–∞—Ä—Ç —Å–æ —Å–ª–µ–¥—É—é—â–µ–π –Ω–µ–¥–µ–ª–∏"

–¢–µ–∫—Å—Ç: "Need to refactor the authentication module. Current implementation 
        is not secure and needs JWT support..."
Summary: "Refactor authentication module to add security and JWT support"
```

#### 3.1.3. –ó–∞–¥–∞—á–∏ (Action Items)

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –§–æ—Ä–º–∞—Ç: –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ, –≤—ã–ø–æ–ª–Ω–∏–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- –Ø–∑—ã–∫: —Ç–æ—Ç –∂–µ, —á—Ç–æ –∏ –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞: –≥–ª–∞–≥–æ–ª + –æ–±—ä–µ–∫—Ç + –∫–æ–Ω—Ç–µ–∫—Å—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏, –±–µ–∑ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π

**–ü—Ä–∏–º–µ—Ä—ã:**
```
–¢–µ–∫—Å—Ç: "–ó–∞–≤—Ç—Ä–∞ –Ω—É–∂–Ω–æ –ø–æ–∑–≤–æ–Ω–∏—Ç—å –ò–≤–∞–Ω—É –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç. 
        –¢–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—á—Ç—É."
Tasks:
- [ ] –ü–æ–∑–≤–æ–Ω–∏—Ç—å –ò–≤–∞–Ω—É
- [ ] –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—á—Ç—É

–¢–µ–∫—Å—Ç: "–°–µ–≥–æ–¥–Ω—è –±—ã–ª –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ã–π –¥–µ–Ω—å, —Å–¥–µ–ª–∞–ª –º–Ω–æ–≥–æ —Ä–∞–±–æ—Ç—ã"
Tasks: [] (–Ω–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á)
```

### 3.2. –§–æ—Ä–º–∞—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

#### 3.2.1. –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞ (processed: true)

```markdown
---
date: 2026-02-17
tags: [inbox, telegram, extracted_tag1, extracted_tag2, extracted_tag3]
processed: true
processing_model: gpt-4o-mini
---

# –ó–∞–º–µ—Ç–∫–∏ –∑–∞ 17.02.2026

## 14:30

**Summary:** –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏

### –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ó–∞–¥–∞—á–∏

- [ ] –ó–∞–¥–∞—á–∞ 1
- [ ] –ó–∞–¥–∞—á–∞ 2
- [ ] –ó–∞–¥–∞—á–∞ 3

---
*–ò—Å—Ç–æ—á–Ω–∏–∫: Telegram | –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: Smart Processing (gpt-4o-mini)*
```

#### 3.2.2. –ì–æ–ª–æ—Å–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞ (processed: true)

```markdown
---
date: 2026-02-17
tags: [inbox, telegram, voice, extracted_tag1, extracted_tag2]
processed: true
processing_model: gpt-4o-mini
---

# –ó–∞–º–µ—Ç–∫–∏ –∑–∞ 17.02.2026

## 14:30 üé§

**Summary:** –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –∑–∞–º–µ—Ç–∫–∏

### –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

### –ó–∞–¥–∞—á–∏

- [ ] –ó–∞–¥–∞—á–∞ –∏–∑ –≥–æ–ª–æ—Å–æ–≤–æ–π –∑–∞–º–µ—Ç–∫–∏

---
*–ò—Å—Ç–æ—á–Ω–∏–∫: Telegram Voice Message ‚Ä¢ –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 45—Å ‚Ä¢ –Ø–∑—ã–∫: ru | –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: Smart Processing (gpt-4o-mini)*
```

#### 3.2.3. –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞ (processed: false)

–ü—Ä–∏ –æ—à–∏–±–∫–µ LLM –∏–ª–∏ –æ—Ç–∫–∞–∑–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```markdown
---
date: 2026-02-17
tags: [inbox, telegram, unprocessed]
processed: false
---

# –ó–∞–º–µ—Ç–∫–∏ –∑–∞ 17.02.2026

## 14:30

–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏

---
*–ò—Å—Ç–æ—á–Ω–∏–∫: Telegram*
```

### 3.3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (Fallback Behavior)

#### 3.3.1. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

–ü—Ä–∏ –æ—à–∏–±–∫–µ LLM API:

1. **–ü–æ–ø—ã—Ç–∫–∞ 1**: –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ
2. **–ü–æ–ø—ã—Ç–∫–∞ 2**: –ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
3. **–ü–æ–ø—ã—Ç–∫–∞ 3**: –ß–µ—Ä–µ–∑ 4 —Å–µ–∫—É–Ω–¥—ã
4. **Fallback**: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏

```python
# Exponential backoff
wait_time = 2 ** (attempt - 1)  # 0, 2, 4 —Å–µ–∫—É–Ω–¥—ã
```

#### 3.3.2. –¢–∏–ø—ã –æ—à–∏–±–æ–∫

| –¢–∏–ø –æ—à–∏–±–∫–∏ | –î–µ–π—Å—Ç–≤–∏–µ | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é |
|------------|----------|--------------------------|
| Timeout | Retry ‚Üí Fallback | "‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ AI, –∑–∞–º–µ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∫–∞–∫ –µ—Å—Ç—å" |
| Rate Limit | Fallback | "‚ö†Ô∏è –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AI, –∑–∞–º–µ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏" |
| Invalid API Key | Fallback | "‚ö†Ô∏è –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ AI, –∑–∞–º–µ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∫–∞–∫ –µ—Å—Ç—å" |
| JSON Parse Error | Retry ‚Üí Fallback | "‚ö†Ô∏è AI –≤–µ—Ä–Ω—É–ª –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç, –∑–∞–º–µ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∫–∞–∫ –µ—Å—Ç—å" |

#### 3.3.3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

–í—Å–µ –æ—à–∏–±–∫–∏ LLM –¥–æ–ª–∂–Ω—ã –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –¥–µ—Ç–∞–ª—è–º–∏:

```python
logger.error(
    f"LLM processing failed after {MAX_RETRIES} attempts: {error_details}",
    extra={
        "user_id": user_id,
        "text_length": len(text),
        "error_type": type(error).__name__
    }
)
```

---

## 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### 4.1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
obsidian-telegram-bot/
‚îú‚îÄ‚îÄ bot.py                     # –û–±–Ω–æ–≤–∏—Ç—å: –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ smart processing
‚îú‚îÄ‚îÄ github_handler.py          # –û–±–Ω–æ–≤–∏—Ç—å: –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–º–µ—Ç–æ–∫
‚îú‚îÄ‚îÄ llm_processor.py           # –ù–û–í–´–ô: –û–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ LLM
‚îú‚îÄ‚îÄ interactive_handler.py     # –ù–û–í–´–ô: Inline buttons + —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ config.py                  # –û–±–Ω–æ–≤–∏—Ç—å: –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ requirements.txt           # –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (OpenAI —É–∂–µ –µ—Å—Ç—å)
‚îú‚îÄ‚îÄ .env                       # –û–±–Ω–æ–≤–∏—Ç—å: –¥–æ–±–∞–≤–∏—Ç—å SMART_PROCESSING_*
‚îú‚îÄ‚îÄ .env.example               # –ù–û–í–´–ô: —à–∞–±–ª–æ–Ω —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
‚îú‚îÄ‚îÄ SMART_PROCESSING_TZ.md     # –ù–û–í–´–ô: —ç—Ç–æ –¢–ó
‚îî‚îÄ‚îÄ SMART_PROCESSING.md        # –ù–û–í–´–ô: –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

### 4.2. –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π

#### 4.2.1. llm_processor.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ OpenAI API

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

```python
@dataclass
class ProcessingResult:
    """–†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ LLM"""
    summary: str
    tags: List[str]
    action_items: List[str]
    success: bool
    error_message: Optional[str] = None

async def process_text(
    text: str, 
    language: str = "ru"
) -> ProcessingResult:
    """
    –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ LLM
    
    Args:
        text: –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
        language: –Ø–∑—ã–∫ —Ç–µ–∫—Å—Ç–∞ (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ summary)
        
    Returns:
        ProcessingResult —Å –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
    """
    pass

async def _call_llm_with_retry(
    text: str, 
    language: str
) -> dict:
    """
    –í—ã–∑–æ–≤ LLM —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏
    
    Implements exponential backoff strategy
    """
    pass

def _validate_response(response: dict) -> bool:
    """–í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç LLM"""
    pass

def _parse_llm_response(response: str) -> dict:
    """–ü–∞—Ä—Å–∏–Ω–≥ JSON –æ—Ç–≤–µ—Ç–∞ –æ—Ç LLM"""
    pass
```

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**

```python
MAX_RETRIES = 3
BASE_WAIT_TIME = 2  # —Å–µ–∫—É–Ω–¥—ã
MAX_TOKENS = 500
TEMPERATURE = 0.3

SYSTEM_PROMPT = """..."""  # —Å–º. —Ä–∞–∑–¥–µ–ª 5
```

#### 4.2.2. interactive_handler.py

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –¥–∏–∞–ª–æ–≥–æ–º —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

```python
class ProcessingSession:
    """–°–µ—Å—Å–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–π –∑–∞–º–µ—Ç–∫–∏"""
    def __init__(
        self, 
        original_text: str, 
        processing_result: ProcessingResult,
        message_id: int
    ):
        self.original_text = original_text
        self.result = processing_result
        self.message_id = message_id
        self.edited = False

async def show_processing_preview(
    message: Message, 
    result: ProcessingResult, 
    original_text: str
) -> None:
    """–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–≤—å—é —Å inline –∫–Ω–æ–ø–∫–∞–º–∏"""
    pass

async def handle_callback_query(
    callback: CallbackQuery, 
    session: ProcessingSession
) -> None:
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ inline –∫–Ω–æ–ø–∫–∏"""
    pass

async def handle_edit_response(
    message: Message, 
    session: ProcessingSession, 
    field: str
) -> None:
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—è"""
    pass

def generate_preview_text(
    result: ProcessingResult, 
    original_text: str
) -> str:
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –ø—Ä–µ–≤—å—é"""
    pass

def create_inline_keyboard() -> InlineKeyboardMarkup:
    """–°–æ–∑–¥–∞–Ω–∏–µ inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã"""
    pass
```

**–•—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π:**

```python
# In-memory storage –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π
processing_sessions: Dict[int, ProcessingSession] = {}

# Key: user_id, Value: ProcessingSession
# –û—á–∏—Å—Ç–∫–∞ –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç–∞ (10 –º–∏–Ω—É—Ç)
```

### 4.3. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–æ–¥—É–ª—è—Ö

#### 4.3.1. bot.py

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `handle_text_message()`:**

```python
async def handle_text_message(message: Message):
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ...
    
    status_message = await message.answer("‚è≥ –°–æ—Ö—Ä–∞–Ω—è—é –∑–∞–º–µ—Ç–∫—É...")
    
    try:
        # –ù–û–í–û–ï: Smart Processing
        if config.SMART_PROCESSING_ENABLED:
            await status_message.edit_text("ü§ñ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é —á–µ—Ä–µ–∑ AI...")
            
            result = await llm_processor.process_text(
                text=message.text,
                language="ru"
            )
            
            if result.success:
                # –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –ø—Ä–µ–≤—å—é
                await interactive_handler.show_processing_preview(
                    message=message,
                    result=result,
                    original_text=message.text
                )
                await status_message.delete()
                return
        
        # Fallback: —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏
        success, result_message = github_handler.create_note(
            message.text,
            processed=False
        )
        # ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `handle_voice_message()`:**

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏.

#### 4.3.2. github_handler.py

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `create_note()`:**

```python
def create_note(
    self, 
    message_text: str,
    processed: bool = False,
    processing_result: Optional[ProcessingResult] = None
) -> tuple[bool, str]:
    """
    –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Smart Processing
    
    Args:
        message_text: –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç
        processed: –§–ª–∞–≥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ LLM
        processing_result: –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–µ—Å–ª–∏ processed=True)
    """
    # ... —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç processed ...
```

**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥:**

```python
def _format_processed_note(
    self,
    time_formatted: str,
    message_text: str,
    result: ProcessingResult,
    voice_metadata: Optional[dict] = None
) -> str:
    """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–π –∑–∞–º–µ—Ç–∫–∏"""
    pass
```

#### 4.3.3. config.py

**–î–æ–±–∞–≤–∏—Ç—å:**

```python
# Smart Processing –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
SMART_PROCESSING_ENABLED = os.getenv('SMART_PROCESSING_ENABLED', 'true').lower() == 'true'
SMART_PROCESSING_MODEL = os.getenv('SMART_PROCESSING_MODEL', 'gpt-4o-mini')
SMART_PROCESSING_TEMPERATURE = float(os.getenv('SMART_PROCESSING_TEMPERATURE', '0.3'))
SMART_PROCESSING_MAX_TOKENS = int(os.getenv('SMART_PROCESSING_MAX_TOKENS', '500'))

# Rate limiting –¥–ª—è LLM
MAX_LLM_REQUESTS_PER_HOUR = int(os.getenv('MAX_LLM_REQUESTS_PER_HOUR', '20'))
```

### 4.4. Workflow –¥–∏–∞–≥—Ä–∞–º–º–∞

```mermaid
flowchart TD
    Start[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ] --> CheckType{–¢–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è?}
    CheckType -->|–¢–µ–∫—Å—Ç| ProcessText[–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞]
    CheckType -->|–ì–æ–ª–æ—Å| Transcribe[–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è —á–µ—Ä–µ–∑ Whisper]
    Transcribe --> ProcessText
    
    ProcessText --> CheckEnabled{Smart Processing –≤–∫–ª—é—á–µ–Ω?}
    CheckEnabled -->|–ù–µ—Ç| SaveRaw[–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏]
    CheckEnabled -->|–î–∞| CheckRateLimit{Rate limit OK?}
    
    CheckRateLimit -->|–ù–µ—Ç| SaveRaw
    CheckRateLimit -->|–î–∞| CallLLM[–í—ã–∑–æ–≤ LLM GPT-4o-mini]
    
    CallLLM --> CheckLLMSuccess{–£—Å–ø–µ—à–Ω–æ?}
    CheckLLMSuccess -->|–ù–µ—Ç| Retry{–ü–æ–≤—Ç–æ—Ä–∏—Ç—å?}
    Retry -->|–î–∞, –º–∞–∫—Å 3| CallLLM
    Retry -->|–ù–µ—Ç| SaveRaw
    
    CheckLLMSuccess -->|–î–∞| ShowPreview[–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–≤—å—é —Å inline –∫–Ω–æ–ø–∫–∞–º–∏]
    ShowPreview --> WaitUserAction[–û–∂–∏–¥–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    
    WaitUserAction --> UserAction{–î–µ–π—Å—Ç–≤–∏–µ}
    UserAction -->|‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å| SaveProcessed[–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π]
    UserAction -->|‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å| EditFlow[–ó–∞–ø—Ä–æ—Å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è]
    UserAction -->|üîÑ –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å| CallLLM
    UserAction -->|‚ùå –ë–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏| SaveRaw
    
    EditFlow --> UpdatePreview[–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–≤—å—é]
    UpdatePreview --> WaitUserAction
    
    SaveProcessed --> GitHub[Commit –≤ GitHub]
    SaveRaw --> GitHub
    GitHub --> Notification[–£–≤–µ–¥–æ–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
    Notification --> End[–ö–æ–Ω–µ—Ü]
```

---

## 5. –ü—Ä–æ–º–ø—Ç –¥–ª—è LLM

### 5.1. System Prompt

```python
SYSTEM_PROMPT = """–¢—ã - –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–º–µ—Ç–æ–∫ –≤ —Å–∏—Å—Ç–µ–º–µ Personal Knowledge Management (Obsidian).
–¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –∏ –∏–∑–≤–ª–µ—á—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.

–í–ê–ñ–ù–´–ï –ü–†–ê–í–ò–õ–ê:
1. –ò–∑–≤–ª–µ–∫–∞–π —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ —è–≤–Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ç–µ–∫—Å—Ç–µ
2. –ù–ï –¥–æ–±–∞–≤–ª—è–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ—Ç —Å–µ–±—è
3. –¢–µ–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é
4. –†–µ–∑—é–º–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º, –Ω–æ –∫—Ä–∞—Ç–∫–∏–º
5. –ó–∞–¥–∞—á–∏ - —Ç–æ–ª—å–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —É–ø–æ–º—è–Ω—É—Ç—ã –≤ —Ç–µ–∫—Å—Ç–µ

–ò–ó–í–õ–ï–ö–ê–ô:
1. –¢–ï–ì–ò (tags): 
   - 3-5 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ç–µ–≥–æ–≤
   - –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫, lowercase
   - –§–æ—Ä–º–∞—Ç: kebab-case (—á–µ—Ä–µ–∑ –¥–µ—Ñ–∏—Å)
   - –û—Ç –æ–±—â–∏—Ö –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º
   - –ü—Ä–∏–º–µ—Ä—ã: project-idea, meeting, task, shopping, health

2. –†–ï–ó–Æ–ú–ï (summary):
   - –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ (1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
   - –ú–∞–∫—Å–∏–º—É–º 200 —Å–∏–º–≤–æ–ª–æ–≤
   - –ù–∞ —Ç–æ–º –∂–µ —è–∑—ã–∫–µ, —á—Ç–æ –∏ —Ç–µ–∫—Å—Ç
   - –§–æ–∫—É—Å –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö –∏–¥–µ—è—Ö

3. –ó–ê–î–ê–ß–ò (action_items):
   - –°–ø–∏—Å–æ–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
   - –¢–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ —É–ø–æ–º—è–Ω—É—Ç–æ –≤ —Ç–µ–∫—Å—Ç–µ
   - –§–æ—Ä–º–∞—Ç: –≥–ª–∞–≥–æ–ª + –æ–±—ä–µ–∫—Ç + –∫–æ–Ω—Ç–µ–∫—Å—Ç
   - –ï—Å–ª–∏ –∑–∞–¥–∞—á –Ω–µ—Ç - –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤

–§–û–†–ú–ê–¢ –û–¢–í–ï–¢–ê (—Å—Ç—Ä–æ–≥–æ JSON):
{
  "summary": "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è",
  "tags": ["tag1", "tag2", "tag3"],
  "action_items": ["–ó–∞–¥–∞—á–∞ 1", "–ó–∞–¥–∞—á–∞ 2"]
}

–ù–ï –¥–æ–±–∞–≤–ª—è–π –Ω–∏–∫–∞–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –∫—Ä–æ–º–µ JSON!"""
```

### 5.2. User Prompt

```python
def create_user_prompt(text: str, language: str = "ru") -> str:
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è user prompt"""
    
    language_names = {
        "ru": "—Ä—É—Å—Å–∫–∏–π",
        "en": "–∞–Ω–≥–ª–∏–π—Å–∫–∏–π",
        "uk": "—É–∫—Ä–∞–∏–Ω—Å–∫–∏–π",
        "de": "–Ω–µ–º–µ—Ü–∫–∏–π",
        "fr": "—Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π",
        "es": "–∏—Å–ø–∞–Ω—Å–∫–∏–π"
    }
    
    lang_name = language_names.get(language, "–∏—Å—Ö–æ–¥–Ω—ã–π —è–∑—ã–∫ —Ç–µ–∫—Å—Ç–∞")
    
    return f"""–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç –∏ –∏–∑–≤–ª–µ–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

–¢–ï–ö–°–¢:
{text}

–¢–†–ï–ë–û–í–ê–ù–ò–Ø:
- –Ø–∑—ã–∫ —Ä–µ–∑—é–º–µ: {lang_name}
- –¢–µ–≥–∏: –∞–Ω–≥–ª–∏–π—Å–∫–∏–π, lowercase, kebab-case
- –ó–∞–¥–∞—á–∏: —Ç–æ–ª—å–∫–æ —è–≤–Ω–æ —É–ø–æ–º—è–Ω—É—Ç—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

–û—Ç–≤–µ—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON."""
```

### 5.3. –ü—Ä–∏–º–µ—Ä—ã (Few-shot)

–î–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å examples –≤ –ø—Ä–æ–º–ø—Ç:

```python
EXAMPLES = """
–ü–†–ò–ú–ï–† 1:
–¢–µ–∫—Å—Ç: "–ó–∞–≤—Ç—Ä–∞ –Ω—É–∂–Ω–æ –∫—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ –∏ —Ö–ª–µ–±, –∞ —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–Ω–∏—Ç—å –º–∞–º–µ"
–û—Ç–≤–µ—Ç:
{
  "summary": "–°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –ø–æ–∑–≤–æ–Ω–∏—Ç—å –º–∞–º–µ",
  "tags": ["shopping", "groceries", "family", "todo"],
  "action_items": ["–ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ", "–ö—É–ø–∏—Ç—å —Ö–ª–µ–±", "–ü–æ–∑–≤–æ–Ω–∏—Ç—å –º–∞–º–µ"]
}

–ü–†–ò–ú–ï–† 2:
–¢–µ–∫—Å—Ç: "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –∏–¥–µ—è –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ - —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É—á–µ—Ç–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤ —Å AI –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π"
–û—Ç–≤–µ—Ç:
{
  "summary": "–ò–¥–µ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —É—á–µ—Ç–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤ —Å AI –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π",
  "tags": ["project-idea", "finance", "ai", "app"],
  "action_items": []
}

–ü–†–ò–ú–ï–† 3:
–¢–µ–∫—Å—Ç: "Today's meeting was productive. We decided to refactor the auth module and deploy to staging by Friday"
–û—Ç–≤–µ—Ç:
{
  "summary": "Productive meeting with decision to refactor auth and deploy to staging by Friday",
  "tags": ["meeting", "refactoring", "deployment", "auth"],
  "action_items": ["Refactor authentication module", "Deploy to staging by Friday"]
}
"""
```

---

## 6. –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 6.1. –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ö–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç –±–µ–∑ –∑–∞–¥–∞—á

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```
"–•–æ—Ä–æ—à–∞—è –ø–æ–≥–æ–¥–∞ —Å–µ–≥–æ–¥–Ω—è"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "summary": "–ó–∞–º–µ—Ç–∫–∞ –æ —Ö–æ—Ä–æ—à–µ–π –ø–æ–≥–æ–¥–µ",
  "tags": ["weather", "personal"],
  "action_items": []
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏:**
- ‚úÖ –¢–µ–≥–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã
- ‚úÖ –†–µ–∑—é–º–µ –∞–¥–µ–∫–≤–∞—Ç–Ω–æ
- ‚úÖ –ù–µ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π –∑–∞–¥–∞—á

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç —Å –∑–∞–¥–∞—á–∞–º–∏

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```
"–ù–∞ –≤—Å—Ç—Ä–µ—á–µ –æ–±—Å—É–¥–∏–ª–∏ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –ø–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏. –†–µ—à–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Python –∏ PostgreSQL. 
–ú–Ω–µ –Ω—É–∂–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¢–ó –∫ –ø—è—Ç–Ω–∏—Ü–µ, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å dev –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ —Å–æ–∑–≤–æ–Ω–∏—Ç—å—Å—è —Å –∫–æ–º–∞–Ω–¥–æ–π –≤ —á–µ—Ç–≤–µ—Ä–≥."
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "summary": "–û–±—Å—É–∂–¥–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –Ω–∞ Python –∏ PostgreSQL —Å –∑–∞–¥–∞—á–∞–º–∏ –Ω–∞ –Ω–µ–¥–µ–ª—é",
  "tags": ["project", "automation", "python", "postgresql", "meeting"],
  "action_items": [
    "–ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¢–ó –∫ –ø—è—Ç–Ω–∏—Ü–µ",
    "–ù–∞—Å—Ç—Ä–æ–∏—Ç—å dev –æ–∫—Ä—É–∂–µ–Ω–∏–µ",
    "–°–æ–∑–≤–æ–Ω–∏—Ç—å—Å—è —Å –∫–æ–º–∞–Ω–¥–æ–π –≤ —á–µ—Ç–≤–µ—Ä–≥"
  ]
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏:**
- ‚úÖ –í—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑–≤–ª–µ—á–µ–Ω—ã
- ‚úÖ –¢–µ–≥–∏ –ø–æ–∫—Ä—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–º—ã
- ‚úÖ –†–µ–∑—é–º–µ —Å–∂–∏–º–∞–µ—Ç —Å—É—Ç—å

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```
Voice message (45 —Å–µ–∫, ru):
"–≠–º, –∫–æ—Ä–æ—á–µ, –Ω—É–∂–Ω–æ –Ω–µ –∑–∞–±—ã—Ç—å –∑–∞–≤—Ç—Ä–∞, –Ω—É, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –Ω–∞–ª–æ–≥–æ–≤—É—é 
–∏ –µ—â—ë —Ç–∞–º –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –∫ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥—É. –ê—Ö –¥–∞, –∏ –æ–ø–ª–∞—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–æ –∫–æ–Ω—Ü–∞ –Ω–µ–¥–µ–ª–∏."
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "summary": "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –Ω–∞–ª–æ–≥–æ–≤—É—é, –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –∫ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥—É, –æ–ø–ª–∞—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç",
  "tags": ["todo", "taxes", "health", "bills"],
  "action_items": [
    "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –Ω–∞–ª–æ–≥–æ–≤—É—é",
    "–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –∫ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥—É",
    "–û–ø–ª–∞—Ç–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–æ –∫–æ–Ω—Ü–∞ –Ω–µ–¥–µ–ª–∏"
  ]
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏:**
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å—Ç–Ω–æ–π —Ä–µ—á–∏ (—Å–ª–æ–≤–∞-–ø–∞—Ä–∞–∑–∏—Ç—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è)
- ‚úÖ –ó–∞–¥–∞—á–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –¢–µ–≥ voice –¥–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

#### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```
Voice message (30 —Å–µ–∫, en):
"Just had an interesting idea for a side project. We could build a tool 
that analyzes code complexity and suggests refactoring options."
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "summary": "Idea for a tool that analyzes code complexity and suggests refactoring",
  "tags": ["project-idea", "coding", "tool", "refactoring"],
  "action_items": []
}
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏:**
- ‚úÖ –†–µ–∑—é–º–µ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- ‚úÖ –ù–µ—Ç –ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á (—ç—Ç–æ –∏–¥–µ—è, –Ω–µ –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π)

#### –°—Ü–µ–Ω–∞—Ä–∏–π 5: –û—à–∏–±–∫–∞ LLM (timeout)

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```
–õ—é–±–æ–π —Ç–µ–∫—Å—Ç + –∏–º–∏—Ç–∞—Ü–∏—è timeout OpenAI API
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- 3 –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (processed: false)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ AI, –∑–∞–º–µ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∫–∞–∫ –µ—Å—Ç—å"

**–ö—Ä–∏—Ç–µ—Ä–∏–∏:**
- ‚úÖ Retry –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Fallback –≤—ã–ø–æ–ª–Ω–µ–Ω
- ‚úÖ –ó–∞–º–µ—Ç–∫–∞ –Ω–µ –ø–æ—Ç–µ—Ä—è–Ω–∞

#### –°—Ü–µ–Ω–∞—Ä–∏–π 6: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ inline buttons

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç: "–í—Å—Ç—Ä–µ—á–∞ —Å –∫–ª–∏–µ–Ω—Ç–æ–º –≤ 15:00"
2. LLM –æ–±—Ä–∞–±–æ—Ç–∞–ª
3. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "‚úèÔ∏è –¢–µ–≥–∏"
4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å: "meeting, client, important, urgent"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–µ–≤—å—é –æ–±–Ω–æ–≤–ª–µ–Ω–æ —Å –Ω–æ–≤—ã–º–∏ —Ç–µ–≥–∞–º–∏
- Inline –∫–Ω–æ–ø–∫–∏ —Å–Ω–æ–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã
- –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ–≥–∏

**–ö—Ä–∏—Ç–µ—Ä–∏–∏:**
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ UI –æ—Ç–∑—ã–≤—á–∏–≤
- ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

#### –°—Ü–µ–Ω–∞—Ä–∏–π 7: –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç
2. LLM –æ–±—Ä–∞–±–æ—Ç–∞–ª
3. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "üîÑ –ó–∞–Ω–æ–≤–æ"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ù–æ–≤—ã–π –≤—ã–∑–æ–≤ LLM
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –ø—Ä–µ–≤—å—é —Å –Ω–æ–≤—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–Ω–æ–≤–∞ –ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å

**–ö—Ä–∏—Ç–µ—Ä–∏–∏:**
- ‚úÖ –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- ‚úÖ Rate limit —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è (–∏–∑-–∑–∞ temperature)

### 6.2. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏—ë–º–∫–∏

| ‚Ññ | –ö—Ä–∏—Ç–µ—Ä–∏–π | –ü—Ä–æ–≤–µ—Ä–∫–∞ |
|---|----------|----------|
| 1 | LLM –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–≥–∏ | –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 20 –ø—Ä–∏–º–µ—Ä–∞—Ö |
| 2 | –†–µ–∑—é–º–µ –∞–¥–µ–∫–≤–∞—Ç–Ω–æ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Å—É—Ç—å | –î–ª–∏–Ω–∞ ‚â§ 200 —Å–∏–º–≤–æ–ª–æ–≤, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —è–∑—ã–∫ |
| 3 | –ó–∞–¥–∞—á–∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è —Ç–æ—á–Ω–æ | –ù–µ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–π, –≤—Å–µ —É–ø–æ–º—è–Ω—É—Ç—ã–µ –Ω–∞–π–¥–µ–Ω—ã |
| 4 | Inline buttons —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ | –í—Å–µ 6 –∫–Ω–æ–ø–æ–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã |
| 5 | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ | –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –∑–∞–º–µ—Ç–∫–µ |
| 6 | Fallback —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö LLM | –ó–∞–º–µ—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Å processed: false |
| 7 | –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —à–∞–±–ª–æ–Ω—É | –í–∞–ª–∏–¥–Ω—ã–π frontmatter, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–¥–µ–ª–æ–≤ |
| 8 | Rate limiting —Ä–∞–±–æ—Ç–∞–µ—Ç | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ—Å–ª–µ 20 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —á–∞—Å |
| 9 | –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è | –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ |
| 10 | –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–µ–º–ª–µ–º–∞ | LLM ‚â§ 5 —Å–µ–∫, –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª ‚â§ 10 —Å–µ–∫ |

### 6.3. –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

–î–ª—è –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ LLM –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

1. **Precision (—Ç–æ—á–Ω–æ—Å—Ç—å —Ç–µ–≥–æ–≤)**: –°–∫–æ–ª—å–∫–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ç–µ–≥–æ–≤ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã
2. **Recall (–ø–æ–ª–Ω–æ—Ç–∞ –∑–∞–¥–∞—á)**: –°–∫–æ–ª—å–∫–æ —É–ø–æ–º—è–Ω—É—Ç—ã—Ö –∑–∞–¥–∞—á –∏–∑–≤–ª–µ—á–µ–Ω–æ
3. **Summary Quality**: –†—É—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –ø–æ —à–∫–∞–ª–µ 1-5
4. **User Satisfaction**: –ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–∞–≤–æ–∫ —á–µ—Ä–µ–∑ inline buttons

---

## 7. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 7.1. Rate Limiting

#### 7.1.1. –õ–∏–º–∏—Ç—ã

| –†–µ—Å—É—Ä—Å | –õ–∏–º–∏—Ç | –ü–µ—Ä–∏–æ–¥ | –î–µ–π—Å—Ç–≤–∏–µ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ |
|--------|-------|--------|-------------------------|
| LLM –∑–∞–ø—Ä–æ—Å—ã | 20 | 1 —á–∞—Å | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏ |
| –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è | 10 | 1 —á–∞—Å | –û—Ç–∫–∞–∑ –≤ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏–∏ |

#### 7.1.2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

```python
# In bot.py
llm_requests = defaultdict(list)

def check_llm_rate_limit(user_id: int) -> tuple[bool, int]:
    """
    –ü—Ä–æ–≤–µ—Ä–∫–∞ rate limit –¥–ª—è LLM –∑–∞–ø—Ä–æ—Å–æ–≤
    
    Returns:
        tuple: (—Ä–∞–∑—Ä–µ—à–µ–Ω–æ, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –∑–∞–ø—Ä–æ—Å–æ–≤)
    """
    now = datetime.now()
    hour_ago = now - timedelta(hours=1)
    
    # –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    llm_requests[user_id] = [t for t in llm_requests[user_id] if t > hour_ago]
    
    current_count = len(llm_requests[user_id])
    
    if current_count >= config.MAX_LLM_REQUESTS_PER_HOUR:
        return False, 0
    
    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
    llm_requests[user_id].append(now)
    remaining = config.MAX_LLM_REQUESTS_PER_HOUR - current_count - 1
    
    return True, remaining
```

#### 7.1.3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```python
if not allowed:
    await message.answer(
        f"‚è∏ –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç AI –æ–±—Ä–∞–±–æ—Ç–∫–∏.\n"
        f"–ú–∞–∫—Å–∏–º—É–º: {config.MAX_LLM_REQUESTS_PER_HOUR} –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —á–∞—Å.\n"
        f"–ó–∞–º–µ—Ç–∫–∞ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏."
    )
```

### 7.2. –°—Ç–æ–∏–º–æ—Å—Ç—å

#### 7.2.1. –†–∞—Å—Ü–µ–Ω–∫–∏ OpenAI (GPT-4o-mini, —Ñ–µ–≤—Ä–∞–ª—å 2026)

| –¢–∏–ø | –¶–µ–Ω–∞ |
|-----|------|
| Input tokens | $0.150 / 1M tokens |
| Output tokens | $0.600 / 1M tokens |

#### 7.2.2. –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏

**–°—Ä–µ–¥–Ω—è—è –∑–∞–º–µ—Ç–∫–∞:**
- Input: ~600 tokens (–ø—Ä–æ–º–ø—Ç + —Ç–µ–∫—Å—Ç –∑–∞–º–µ—Ç–∫–∏)
- Output: ~200 tokens (JSON —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏)

**–°—Ç–æ–∏–º–æ—Å—Ç—å –æ–¥–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```
(600 * 0.15 + 200 * 0.6) / 1,000,000 = $0.000210 ‚âà $0.0002
```

**–ú–µ—Å—è—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**

| –°—Ü–µ–Ω–∞—Ä–∏–π | –ó–∞–º–µ—Ç–æ–∫/–¥–µ–Ω—å | –ó–∞–º–µ—Ç–æ–∫/–º–µ—Å—è—Ü | –°—Ç–æ–∏–º–æ—Å—Ç—å/–º–µ—Å—è—Ü |
|----------|--------------|---------------|-----------------|
| –õ–µ–≥–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | 10 | 300 | $0.06 |
| –°—Ä–µ–¥–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | 30 | 900 | $0.18 |
| –ê–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | 100 | 3000 | $0.60 |
| –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | 200 | 6000 | $1.20 |

**–í—ã–≤–æ–¥:** –°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞ –¥–∞–∂–µ –ø—Ä–∏ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏.

### 7.3. –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å

#### 7.3.1. –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

- ‚úÖ –í—Å–µ –∑–∞–º–µ—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ OpenAI API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ OpenAI –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π (—Å–æ–≥–ª–∞—Å–Ω–æ API Terms)
- ‚úÖ –î–∞–Ω–Ω—ã–µ –ù–ï —Ö—Ä–∞–Ω—è—Ç—Å—è —É OpenAI –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (—Å–æ–≥–ª–∞—Å–Ω–æ API Terms)
- ‚ö†Ô∏è –ü–µ—Ä–µ–¥–∞—á–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ HTTPS (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ)

#### 7.3.2. –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

–î–æ–±–∞–≤–∏—Ç—å –≤ README.md:

```markdown
### ‚ö†Ô∏è –í–∞–∂–Ω–æ: –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–Ω–æ–º Smart Processing –≤–∞—à–∏ –∑–∞–º–µ—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ OpenAI API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏.

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- –¢–µ–∫—Å—Ç –∑–∞–º–µ—Ç–æ–∫ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ã OpenAI
- OpenAI –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π
- –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∞ (HTTPS)
- –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã–µ –ù–ï —Ö—Ä–∞–Ω—è—Ç—Å—è —É OpenAI

**–ï—Å–ª–∏ –≤–∞—Å –±–µ—Å–ø–æ–∫–æ–∏—Ç –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å:**
- –û—Ç–∫–ª—é—á–∏—Ç–µ Smart Processing: `SMART_PROCESSING_ENABLED=false` –≤ `.env`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –∑–∞–º–µ—Ç–æ–∫ –±–µ–∑ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ self-hosted LLM (–±—É–¥—É—â–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è)
```

#### 7.3.3. –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

**–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å:**
- –ü–∞—Ä–æ–ª–∏ –∏ —Ç–æ–∫–µ–Ω—ã
- –ù–æ–º–µ—Ä–∞ –∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö –∫–∞—Ä—Ç
- –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏ –∑–∞—â–∏—â–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –∫–Ω–æ–ø–∫—É "üîí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–µ–∑ AI" –¥–ª—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∑–∞–º–µ—Ç–æ–∫.

### 7.4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–¥–∞

#### 7.4.1. –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```python
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
MAX_TEXT_LENGTH = 10000  # ~10k —Å–∏–º–≤–æ–ª–æ–≤

def validate_text_for_processing(text: str) -> tuple[bool, str]:
    """–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ LLM"""
    if not text or not text.strip():
        return False, "–ü—É—Å—Ç–æ–π —Ç–µ–∫—Å—Ç"
    
    if len(text) > MAX_TEXT_LENGTH:
        return False, f"–¢–µ–∫—Å—Ç —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π (–º–∞–∫—Å {MAX_TEXT_LENGTH} —Å–∏–º–≤–æ–ª–æ–≤)"
    
    return True, "OK"
```

#### 7.4.2. –ó–∞—â–∏—Ç–∞ –æ—Ç injection

```python
# –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
def sanitize_user_input(text: str) -> str:
    """–û—á–∏—Å—Ç–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"""
    # OpenAI API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç escaping
    # –ù–æ –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π —É–¥–∞–ª—è–µ–º –Ω—É–ª–µ–≤—ã–µ –±–∞–π—Ç—ã
    return text.replace('\x00', '')
```

#### 7.4.3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ JSON

```python
def safe_json_parse(response: str) -> Optional[dict]:
    """–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ JSON –æ—Ç LLM"""
    try:
        # –ü–æ–ø—ã—Ç–∫–∞ –∏–∑–≤–ª–µ—á—å JSON –∏–∑ response
        # LLM –∏–Ω–æ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –¥–æ/–ø–æ—Å–ª–µ JSON
        json_start = response.find('{')
        json_end = response.rfind('}') + 1
        
        if json_start == -1 or json_end == 0:
            return None
        
        json_str = response[json_start:json_end]
        return json.loads(json_str)
    except json.JSONDecodeError as e:
        logger.error(f"JSON parse error: {e}")
        return None
```

---

## 8. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 8.1. –§–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

#### 8.1.1. SMART_PROCESSING.md (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

**–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:**
- –ß—Ç–æ —Ç–∞–∫–æ–µ Smart Processing
- –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å –ø—Ä–∏–º–µ—Ä–∞–º–∏)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ (.env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (inline –∫–Ω–æ–ø–∫–∏)
- FAQ
- Troubleshooting

#### 8.1.2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ README.md

–î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é:

```markdown
## ü§ñ Smart Processing

–ë–æ—Ç —Ç–µ–ø–µ—Ä—å —É–º–µ–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–º–µ—Ç–∫–∏ —á–µ—Ä–µ–∑ AI!

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç Smart Processing:
- üè∑Ô∏è –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ç–µ–≥–∏
- üìù –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ
- ‚úÖ –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∑–∞–¥–∞—á–∏ (action items)
- üí¨ –ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

[–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚Üí](SMART_PROCESSING.md)
```

#### 8.1.3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ QUICK_START_VPS.md

–î–æ–±–∞–≤–∏—Ç—å —à–∞–≥ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```markdown
### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Smart Processing (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è AI –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–º–µ—Ç–æ–∫:

```bash
# –í —Ñ–∞–π–ª–µ .env –¥–æ–±–∞–≤–∏—Ç—å:
SMART_PROCESSING_ENABLED=true
SMART_PROCESSING_MODEL=gpt-4o-mini
```

–°—Ç–æ–∏–º–æ—Å—Ç—å: ~$0.60/–º–µ—Å—è—Ü –ø—Ä–∏ 100 –∑–∞–º–µ—Ç–∫–∞—Ö –≤ –¥–µ–Ω—å
```

#### 8.1.4. .env.example

```env
# Telegram Bot Configuration
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
ALLOWED_USER_ID=your_telegram_user_id

# GitHub Configuration
GITHUB_TOKEN=your_github_personal_access_token
GITHUB_REPO=username/repository

# OpenAI Configuration (–¥–ª—è Whisper –∏ Smart Processing)
OPENAI_API_KEY=your_openai_api_key

# Smart Processing Settings (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
SMART_PROCESSING_ENABLED=true
SMART_PROCESSING_MODEL=gpt-4o-mini
SMART_PROCESSING_TEMPERATURE=0.3
SMART_PROCESSING_MAX_TOKENS=500
MAX_LLM_REQUESTS_PER_HOUR=20
```

### 8.2. –ü—Ä–∏–º–µ—Ä—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

#### –ü—Ä–∏–º–µ—Ä 1: –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è —Ç–µ–∫—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞

**–í—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:**
```
–ó–∞–≤—Ç—Ä–∞ –≤–∞–∂–Ω–∞—è –≤—Å—Ç—Ä–µ—á–∞ —Å –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–º –≤ 14:00. –ù—É–∂–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é 
–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –º–æ–¥–µ–ª—å. –¢–∞–∫–∂–µ –Ω–µ –∑–∞–±—ã—Ç—å –≤–∑—è—Ç—å —Ä–∞—Å–ø–µ—á–∞—Ç–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç Smart Processing:**

```markdown
---
date: 2026-02-17
tags: [inbox, telegram, meeting, investor, presentation, finance]
processed: true
processing_model: gpt-4o-mini
---

# –ó–∞–º–µ—Ç–∫–∏ –∑–∞ 17.02.2026

## 15:45

**Summary:** –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –≤—Å—Ç—Ä–µ—á–µ —Å –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–º: –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è, —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –º–æ–¥–µ–ª—å –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

–ó–∞–≤—Ç—Ä–∞ –≤–∞–∂–Ω–∞—è –≤—Å—Ç—Ä–µ—á–∞ —Å –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–º –≤ 14:00. –ù—É–∂–Ω–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é 
–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –º–æ–¥–µ–ª—å. –¢–∞–∫–∂–µ –Ω–µ –∑–∞–±—ã—Ç—å –≤–∑—è—Ç—å —Ä–∞—Å–ø–µ—á–∞—Ç–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.

### –ó–∞–¥–∞—á–∏

- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –º–æ–¥–µ–ª—å
- [ ] –í–∑—è—Ç—å —Ä–∞—Å–ø–µ—á–∞—Ç–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

---
*–ò—Å—Ç–æ—á–Ω–∏–∫: Telegram | –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: Smart Processing (gpt-4o-mini)*
```

#### –ü—Ä–∏–º–µ—Ä 2: Inline buttons –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```
ü§ñ Smart Processing –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

üìù Summary: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –≤—Å—Ç—Ä–µ—á–µ —Å –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–º
üè∑Ô∏è Tags: meeting, investor, presentation, finance
‚úÖ –ó–∞–¥–∞—á–∏: 3

[‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å]  [‚úèÔ∏è –¢–µ–≥–∏]  [‚úèÔ∏è –†–µ–∑—é–º–µ]
[‚úèÔ∏è –ó–∞–¥–∞—á–∏]  [üîÑ –ó–∞–Ω–æ–≤–æ]  [‚ùå –ö–∞–∫ –µ—Å—Ç—å]
```

---

## 9. –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### 9.1. –≠—Ç–∞–ø—ã (Milestones)

#### Milestone 1: –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (–Ω–µ–¥–µ–ª—è 1)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ `llm_processor.py`
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAI API
- ‚úÖ –ë–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞
- ‚úÖ Retry –ª–æ–≥–∏–∫–∞
- ‚úÖ Unit —Ç–µ—Å—Ç—ã –¥–ª—è LLM processor

#### Milestone 2: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–Ω–µ–¥–µ–ª—è 2)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ `interactive_handler.py`
- ‚úÖ Inline buttons –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ callback queries
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏

#### Milestone 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–Ω–µ–¥–µ–ª—è 3)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `bot.py`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `github_handler.py`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `config.py`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ Rate limiting –¥–ª—è LLM

#### Milestone 4: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ–¥–µ–ª—è 4)
- ‚úÖ –ù–∞–ø–∏—Å–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- ‚úÖ –ë–∞–≥—Ñ–∏–∫—Å—ã
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤
- ‚úÖ Deployment –Ω–∞ VPS

### 9.2. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```mermaid
graph LR
    M1[Milestone 1: LLM] --> M2[Milestone 2: Interactive]
    M2 --> M3[Milestone 3: Integration]
    M3 --> M4[Milestone 4: Docs & Test]
```

### 9.3. –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

| –†–∏—Å–∫ | –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ | –ú–∏—Ç–∏–≥–∞—Ü–∏—è |
|------|-------------|---------|-----------|
| LLM –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–æ–µ | Robust parsing + retry –ª–æ–≥–∏–∫–∞ |
| –í—ã—Å–æ–∫–∞—è latency OpenAI API | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–µ–µ | Async –æ–±—Ä–∞–±–æ—Ç–∫–∞ + user feedback |
| –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ rate limits OpenAI | –ù–∏–∑–∫–∞—è | –°—Ä–µ–¥–Ω–µ–µ | –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π rate limiting |
| –ü–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ç–µ–≥–æ–≤/—Ä–µ–∑—é–º–µ | –°—Ä–µ–¥–Ω—è—è | –°—Ä–µ–¥–Ω–µ–µ | –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ + few-shot examples |
| –°–ª–æ–∂–Ω–æ—Å—Ç—å inline buttons UX | –ù–∏–∑–∫–∞—è | –ù–∏–∑–∫–æ–µ | User testing + –∏—Ç–µ—Ä–∞—Ü–∏–∏ |

---

## 10. –ë—É–¥—É—â–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏ (–≤–Ω–µ scope)

### –ò—Ç–µ—Ä–∞—Ü–∏—è 2: –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –∑–∞–º–µ—Ç–æ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞: –ø—Ä–æ–µ–∫—Ç/–∏–¥–µ—è/–∑–∞–¥–∞—á–∞/–ª–∏—á–Ω–æ–µ
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–∞–ø–∫–∞–º –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –≤ Obsidian

### –ò—Ç–µ—Ä–∞—Ü–∏—è 3: –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫ (Backlinks)
- –ü–æ–∏—Å–∫ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∑–∞–º–µ—Ç–æ–∫ –≤ Vault
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ backlinks
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–µ–π

### –ò—Ç–µ—Ä–∞—Ü–∏—è 4: –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ Vault (RAG)
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–º–µ—Ç–æ–∫
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –ø—Ä–æ—à–ª—ã—Ö –∑–∞–º–µ—Ç–æ–∫

### –ò—Ç–µ—Ä–∞—Ü–∏—è 5: –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —Å—Ç–∏–ª—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ò—Ç–µ—Ä–∞—Ü–∏—è 6: Self-hosted LLM
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π (Llama, Mistral)
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç OpenAI
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å—é

---

## 11. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ A: –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```env
# .env - –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

# Telegram
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
ALLOWED_USER_ID=123456789

# GitHub
GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
GITHUB_REPO=username/obsidian-notes

# OpenAI
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Smart Processing
SMART_PROCESSING_ENABLED=true
SMART_PROCESSING_MODEL=gpt-4o-mini
SMART_PROCESSING_TEMPERATURE=0.3
SMART_PROCESSING_MAX_TOKENS=500
MAX_LLM_REQUESTS_PER_HOUR=20
```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ B: API —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

```python
# –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

@dataclass
class ProcessingResult:
    """–†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ LLM"""
    summary: str
    tags: List[str]
    action_items: List[str]
    success: bool
    error_message: Optional[str] = None
    processing_time: float = 0.0
    model_used: str = "gpt-4o-mini"

@dataclass
class ProcessingSession:
    """–°–µ—Å—Å–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–º–µ—Ç–∫–∏"""
    user_id: int
    message_id: int
    original_text: str
    result: ProcessingResult
    created_at: datetime
    edited: bool = False
    edit_history: List[dict] = field(default_factory=list)

@dataclass
class NoteMetadata:
    """–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏"""
    date: str  # YYYY-MM-DD
    time: str  # HH:MM
    tags: List[str]
    processed: bool
    processing_model: Optional[str] = None
    voice_duration: Optional[int] = None
    voice_language: Optional[str] = None
```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ C: –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```python
# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫

logger.info(
    "LLM processing completed",
    extra={
        "user_id": user_id,
        "text_length": len(text),
        "processing_time": processing_time,
        "model": model_name,
        "tags_count": len(result.tags),
        "tasks_count": len(result.action_items),
        "summary_length": len(result.summary)
    }
)
```

---

## –ü–æ–¥–ø–∏—Å–∏ –∏ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

**–ê–≤—Ç–æ—Ä –¢–ó:** AI Assistant (Claude Sonnet 4.5)  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 17.02.2026  
**–í–µ—Ä—Å–∏—è:** 1.0

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

*–ö–æ–Ω–µ—Ü –¥–æ–∫—É–º–µ–Ω—Ç–∞*
